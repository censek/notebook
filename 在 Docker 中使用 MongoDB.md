> [å®‰è£… Docker](https://blog.csdn.net/Bule_daze/article/details/96281157)

#### 1. ä¸‹è½½é•œåƒ
```shell
docker search mongodb  #åœ¨Dockerçš„é•œåƒä¸­æŸ¥è¯¢MongoDBçš„é•œåƒ
docker pull mongo      #æ‹‰å–å®˜æ–¹mongoé•œåƒï¼ˆä¸€èˆ¬ä¸ºç¬¬ä¸€ä¸ªï¼‰
```



##### ğŸ¦„ï¸ ä¸€äº›å‘½ä»¤ï¼š
- `docker images`ï¼šåˆ—å‡ºæœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒã€‚

	> å„é€‰é¡¹è¯´æ˜ï¼š
	> - REPOSITORYï¼šè¡¨ç¤ºé•œåƒçš„ä»“åº“æº
	> - TAGï¼šé•œåƒçš„æ ‡ç­¾
	> - IMAGE IDï¼šé•œåƒID
	> - CREATEDï¼šé•œåƒåˆ›å»ºæ—¶é—´
	> - SIZEï¼šé•œåƒå¤§å°
	
- `docker ps`ï¼šåˆ—å‡ºå®¹å™¨
	> **docker ps [OPTIONS]**  å‚æ•°è¯´æ˜ï¼š
	> - -aï¼šæ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ã€‚
	> - -fï¼šæ ¹æ®æ¡ä»¶è¿‡æ»¤æ˜¾ç¤ºçš„å†…å®¹ã€‚
	> - --formatï¼šæŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚
	> - -lï¼šæ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ã€‚
	> - -nï¼šåˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨ã€‚
	> - --no-truncï¼šä¸æˆªæ–­è¾“å‡ºã€‚
	> - -qï¼šé™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·ã€‚
	> - -sï¼šæ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°ã€‚

<br>

#### 2. è¿è¡Œå®¹å™¨
`docker run å®¹å™¨ID`
```shell
 docker run -h mqj -p 27017:27017 -v $PWD/db:/data/db --name mongodb-censek cdc6740b66a7
 ```
 > **docker run [OPTIONS] IMAGE [COMMAND] [ARG...]**  å‚æ•°è¯´æ˜ï¼š
 > - -uï¼šæŒ‡å®šå®¹å™¨çš„ç”¨æˆ·
 > - -vï¼šç»™å®¹å™¨æŒ‚è½½å­˜å‚¨å·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªç›®å½•
 > -  -dï¼šæŒ‡å®šå®¹å™¨è¿è¡Œäºå‰å°è¿˜æ˜¯åå°ï¼Œé»˜è®¤ä¸º false
 > - -wï¼šæŒ‡å®šå®¹å™¨çš„å·¥ä½œç›®å½•
 > - -mï¼šæŒ‡å®šå®¹å™¨çš„å†…å­˜ä¸Šé™
 > - -pï¼šæŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼š`ä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£`
 > - -Pï¼šéšæœºæ˜ å°„ä¸€ä¸ª 49000~49900 çš„ç«¯å£åˆ°å†…éƒ¨å®¹å™¨çš„ç½‘ç»œç«¯å£ã€‚
 > - -hï¼šæŒ‡å®šå®¹å™¨çš„ä¸»æœºå
 > - --dnsï¼šæŒ‡å®šå®¹å™¨çš„dnsæœåŠ¡å™¨
 > - --network host æŒ‡å®šä¸å®¿ä¸»æœºçš„ç½‘ç»œé“¾æ¥æ–¹å¼
// é»˜è®¤æ˜¯ bridgeï¼Œå³æ¡¥æ¥ç½‘ç»œï¼Œä»¥æ¡¥æ¥æ¨¡å¼è¿æ¥åˆ°å®¿ä¸»æœºï¼›host æ˜¯å®¿ä¸»ç½‘ç»œï¼Œå³ä¸å®¿ä¸»æœºå…±ç”¨ç½‘ç»œï¼›none åˆ™è¡¨ç¤ºæ— ç½‘ç»œï¼Œå®¹å™¨å°†æ— æ³•è”ç½‘ã€‚
 > - --restart="no" å®¹å™¨åœæ­¢åçš„é‡å¯ç­–ç•¥  noï¼šä¸é‡å¯ï¼›on-failureï¼šå®¹å™¨æ•…éšœé€€å‡ºï¼ˆè¿”å›å€¼éé›¶ï¼‰æ—¶é‡å¯ï¼›alwaysï¼šå®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯ ã€‚
 > <br>
 > 
 > ğŸ”—[docker run, â€“name, â€“hostname å’Œ â€“rm è¯¦è§£](http://www.dockerinfo.net/3689.html)

<br>

#### 3. å¼€å§‹ä½¿ç”¨
mongodb å®¹å™¨è¿è¡Œèµ·æ¥åï¼ˆ`docker ps` å¯ä»¥æŸ¥çœ‹åˆ°çš„æ—¶å€™ï¼‰ï¼Œå¯ç›´æ¥åœ¨å¯è§†åŒ–ç•Œé¢ä¸­è¿›è¡Œæ“ä½œï¼Œå¦‚æœæƒ³åœ¨ç»ˆç«¯æ“ä½œï¼š
`docker exec -it å®¹å™¨ID /bin/bash`
> - -dï¼šåˆ†ç¦»æ¨¡å¼: åœ¨åå°è¿è¡Œ
> - -iï¼šå³ä½¿æ²¡æœ‰é™„åŠ ä¹Ÿä¿æŒSTDIN æ‰“å¼€
> - -tï¼šåˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯
```shell
docker exec -it ca5ea3582c0d bash    
#æˆ–è€…`docker exec -it ca5ea3582c0d /bin/bash`

mongo  #è¿›å…¥MongoDB shell ç«¯
```
<br>

#### 4. é€€å‡ºä¸å†æ¬¡ä½¿ç”¨
æ¯æ¬¡ä¸ç”¨ MongoDB æƒ³è¦é€€å‡ºçš„æ—¶å€™ï¼Œ`docker stop å®¹å™¨ID` åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨ï¼Œä¸‹æ¬¡å†æƒ³ç”¨çš„æ—¶å€™ä½¿ç”¨ `docker start å®¹å™¨ID` å‘½ä»¤ã€‚
> `docker ps` å¯ä»¥æŸ¥çœ‹åˆ°ï¼Œä¾¿å¯ç›´æ¥åœ¨å¯è§†åŒ–ç•Œé¢æ“ä½œMongoDBã€‚
```shell
docker stop 08fcce825138
docker start 08fcce825138

# docker start :å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»è¢«åœæ­¢çš„å®¹å™¨
# docker stop :åœæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨
# docker restart :é‡å¯å®¹å™¨
```
<br>

#### 5. å¦‚æœæƒ³æŠŠæœ¬åœ° MongoDB æ•°æ®åº“ä¸­æ•°æ®è¿ç§»åˆ° Docker ä¸­
###### 1âƒ£ï¸ [å¯¼å‡ºæœ¬åœ°ä¸»æœº MongoDB æ•°æ®åº“ json æ–‡ä»¶](https://blog.csdn.net/Bule_daze/article/details/100704018)ã€‚
###### 2âƒ£ï¸ ä½¿ç”¨ cp å‘½ä»¤å°†ä¸»æœºæ–‡ä»¶æ‹·è´åˆ° Docker å®¹å™¨ä¸­
`docker cp å¯¼å‡ºçš„æ•°æ®çš„æ–‡ä»¶å å®¹å™¨ID:/`
###### 3âƒ£ï¸ è¿›å…¥å®¹å™¨ã€‚
`docker exec -it å®¹å™¨ID /bin/bash`
###### 4âƒ£ï¸ æ‰§è¡Œå¯¼å…¥å‘½ä»¤ã€‚ï¼ˆéœ€è¦å…ˆåœ¨ Docker ä¸­çš„ MongoDB ä¸­åˆ›å»ºç›®æ ‡æ•°æ®åº“ï¼‰
`mongorestore -d ç›®æ ‡æ•°æ®åº“å æƒ³è¦å¯¼å…¥çš„æ•°æ®çš„æ–‡ä»¶è·¯å¾„`
```shell
docker cp eportalplus 08fcce825138:/
docker exec -it 08fcce825138 /bin/bash
mongorestore -d eportal eportalplus
```
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200106152811355.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0J1bGVfZGF6ZQ==,size_16,color_FFFFFF,t_70)
> æ³¨ï¼š å¯ä»¥çœ‹åˆ°å·¦ä¸Šè§’ `root@mqj` ï¼Œmqj å°±æ˜¯æˆ‘åœ¨æ­¥éª¤2ä¸­é€šè¿‡ -h æŒ‡å®šçš„å®¹å™¨çš„ä¸»æœºå<br><br>
> - ï¼ˆå…¶å®ƒæ¯”å¦‚åªå¯¼å…¥æŸä¸ªé›†åˆçš„æ•°æ®çš„å‘½ä»¤è§ä¸Šæ–¹ 1âƒ£ï¸ ä¸­é“¾æ¥ã€‚ï¼‰
